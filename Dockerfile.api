# Opción A (validada): sin apt-get ni ffmpeg
FROM python:3.10-slim-bookworm

ENV PYTHONUNBUFFERED=1 \
    PYTHONDONTWRITEBYTECODE=1 \
    PIP_NO_CACHE_DIR=1

WORKDIR /app

# 1) Instalar requirements vía pip
COPY requirements.txt requirements.txt
RUN python -m pip install --upgrade pip && \
    pip install --no-cache-dir -r requirements.txt

# 2) Copiar el código
COPY . .

ENV FLASK_APP=app.py
EXPOSE 5006

CMD ["flask", "run", "--host=0.0.0.0", "--port=5006", "--debug"]
